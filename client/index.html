<!DOCTYPE html>
<html>
    <head>
	<link id="themes" href="style.css" rel="stylesheet" type="text/css"/>
	<link id="pagestyle" href="default.css" rel="stylesheet" type="text/css"/>
	<link rel="icon" type="image/png" href="images/favicon.png"/>
	<meta charset="UTF-8">
        <title>Chess</title>
	<script language="javascript">
		function getUrlVars() {
			var vars = {};
			var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
				vars[key] = value;
			});
			return vars;
		}
	</script>
	<script language="javascript">
		function changeCSS(cssFile) {
			    document.getElementById("pagestyle").setAttribute("href", cssFile);
		}
		function changeCSS2(cssFile) {
				document.getElementById("themes").setAttribute("href", cssFile);
		}
	</script>
    </head>
    <body>
        <div id="maindiv">
			<div class="header">
				<div class="box">
					<details open>
						<summary>Connection & Themes</summary>
						<br>
						<br>
						<span class="desc">Server Address</span>
						<input id="serveraddr" value="127.0.0.1:8181">
						<button id="connect" type="button">Connect</button>
						<div style="padding-top:0.5em; text-align:center;">
							<button id="join" type="button" disabled>Join (Player)</button> 
							<button id="newgame" type="button" disabled>New Game</button>
						</div>
						<br>
						<div class="box">
							<h1 class="desc">Style Options</h1>
							<button href="#" onclick="changeCSS('default.css', 0);">Default</button> 
							<button href="#" onclick="changeCSS('alternative.css', 0);">Alternative</button>
							<br>
							<button href="#" onclick="changeCSS2('style.css', 0);">Light Mode</button>
							<button href="#" onclick="changeCSS2('dark.css', 0);">Dark Mode</button>
						</div>
					</details>
				</div>
			</div>
				<div id="title">
					<h1 style="text-align:center;">Chess</h1>
				</div>
			<br>
				<div id="chessboard">
			</div>
			<br>
			<br>
			<div id="header">
				<div class="consolebox">
					<span class="desc">Console</span>
					<div id="consolestyle">
						<pre id="console"></pre>
					</div> 
				</div>
				<br>
				<br>

			</div>
			<script src="wasm_exec.js"></script>
			<script>
				if (!WebAssembly.instantiateStreaming) {
					// polyfill
					WebAssembly.instantiateStreaming = async (resp, importObject) => {
						const source = await (await resp).arrayBuffer();
						return await WebAssembly.instantiate(source, importObject);
					};
				}

				const go = new Go();

				let mod, inst;

				WebAssembly.instantiateStreaming(fetch("chess.wasm"), go.importObject).then(
					async result => {
							mod = result.module;
							inst = result.instance;
							go.run(inst);
						}
				);
			</script>
		</div>
    </body>
</html>
